@model List<MadrinHotelCRM.DTO.DTOModels.OdaDTO>
@using MadrinHotelCRM.Entities.Enums
@using MadrinHotelCRM.ExtensionMethods

@{
    Func<OdaDurum, string> renkGetir = durum => durum switch
    {
        OdaDurum.Bos => "text-success",
        OdaDurum.Dolu => "text-danger",
        OdaDurum.Bakimda => "text-warning",
        OdaDurum.Temizlikte => "text-info",
        OdaDurum.Rezervasyonlu => "text-primary",
        OdaDurum.Opsionlu => "text-secondary",
        _ => "text-muted"
    };
}

<h4 class="mb-3">Oda Durumları</h4>

<div class="mb-4">
    <label for="durumFilter" class="form-label">Durum Filtrele:</label>
    <select id="durumFilter" class="form-select w-auto d-inline-block">
        <option value="">— Hepsi —</option>
        @foreach (OdaDurum d in Enum.GetValues(typeof(OdaDurum)))
        {
            <option value="@( (int)d )">@d.GetDisplayName()</option>
        }
    </select>
</div>

@* <div class="row" id="odaList">
    @foreach (var oda in Model)
    {
        var renk = renkGetir(oda.Durum);
        <div class="col-md-4 oda-card mb-3" data-durum="@((int)oda.Durum)">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Oda @oda.OdaNumarasi</h5>
                    <p class="card-text">Tip: @oda.OdaTipiAdi</p>
                    <p class="card-text">
                        Durum: <span class="@renk">@oda.Durum.GetDisplayName()</span>
                    </p>
                </div>
            </div>
        </div>
    }
</div> *@

<div class="row" id="odaList">
    @foreach (var oda in Model)
    {
        var renk = renkGetir(oda.Durum);
        <div class="col-md-4 oda-card mb-3" data-durum="@((int)oda.Durum)" data-odaid="@oda.OdaId">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Oda @oda.OdaNumarasi</h5>
                    <p class="card-text">Tip: @oda.OdaTipiAdi</p>
                    <p class="card-text">
                        Durum: <span class="@renk">@oda.Durum.GetDisplayName()</span>
                    </p>

                    @* Eğer oda boşsa rezervasyon butonu göster *@
                    @if (oda.Durum == OdaDurum.Bos)
                    {
                        <button class="btn btn-sm btn-success rezervasyon-btn">
                            Rezervasyon Oluştur
                        </button>
                    }
                </div>
            </div>
        </div>
    }
</div>